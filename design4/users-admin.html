<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>mTrain Administration | Users</title>
    <!-- Bootstrap -->
    <link rel="stylesheet" href="css/bootstrap.min.css"/>
    <!-- Native css -->
    <link rel="stylesheet" href="css/app.css"/>    
    <link href="jTable/themes/redmond/jquery-ui-1.11.2.custom.css" rel="stylesheet" type="text/css" />
    <link href="jTable/scripts/jtable/themes/metro/blue/jtable.css" rel="stylesheet" type="text/css" />
    
    
   
     
   <script src="jTable/scripts/jquery-1.11.1.min.js"></script>
   <script src="js/bootstrap.min.js"></script>
     <script src="jTable/scripts/jquery-ui-1.11.2.custom.min.js" type="text/javascript"></script>
    <script src="jTable/scripts/jtable/jquery.jtable.js" type="text/javascript"></script>
    
    
     <script type="text/javascript" src="js/jquery.validationEngine.js" charset="utf-8"></script>
    <script type="text/javascript" src="js/languages/jquery.validationEngine-en.js" charset="utf-8"></script>
    <link href="css/validationEngine.jquery.css" rel="stylesheet" type="text/css" />
    
    
    
   
    
    
    
    
  </head>
  <body>
      
      <div class="navbar navbar-default  noborder backgroundblue" role="navigation"> 
    <div class="container header-bg noborder"> 
    <div class="navbar-header ">
    <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
    </button>
         <a href="dashboard.html"   class="navbar-brand">
                     <img src="img/adm-logo.png" class="img-responsive" />
         </a>
    </div>
        <div class="navbar-collapse collapse admin-signout">
            <ul class="nav navbar-nav navbar-right"> 
                <li class="dropdown smallerfont bluehoverbackground">
                    <a href="#" id="adminDropdown" class="dropdown-toggle " data-toggle="dropdown">Admin <b><span class="caret"></span></b></a>
                    <ul class="dropdown-menu  nomargin  nopadding" role="menu" aria-labelledby="adminDropdown">
                         <li role="menuitem" class="dropdown-header"><a href="index.php" >Sign Out</a></li>
                    </ul>
                </li>
            </ul>
        </div>
    </div>
        <div class="container header-bg-m-br noborder"> 
    
        <div class="navbar-collapse collapse">
            <ul class="nav navbar-nav navbar-left ">
                <li class="marginright25"><a href="dashboard.html" >Dashboard</a></li>
                <li class="marginright25"><a href="#" >Topics</a></li>
                <li class="marginright25"><a href="#" >Assessment</a></li>
                <li class="marginright25"><a href="#" >Job Aids</a></li>
                <li class="marginright25"><a href="#" >Standing Orders</a></li>
                <li class="dropdown marginright25">
                    <a href="#" id="usersDropdown" class="dropdown-toggle  active" data-toggle="dropdown">Users <b><span class="caret"></span></b></a>
                    <ul class="dropdown-menu  nomargin" role="menu" aria-labelledby="usersDropdown">
                         <li role="menuitem"><a href="users-batch-registration.html">Batch Registration</a></li>
                         <li role="menuitem" class="dropdown-submenu">
                                <a tabindex="-1" href="#">Administrators</a>
                                  <ul class="dropdown-menu">
                                      <li><a href="users-admin.html">Users</a></li>
                                      <li><a href="users-roles-and-permission.html">Roles & Permissions</a></li>
                                  </ul>
                         </li>
                    </ul>
                </li>
                <li class="dropdown marginright25">
                    <a href="#" id="settingsDropdown" class="dropdown-toggle" data-toggle="dropdown" >Settings <b><span class="caret"></span></b></a>
                    <ul class="dropdown-menu  nomargin" role="menu" aria-labelledby="settingsDropdown">
                         <li role="menuitem"><a href="settings-cadre.html">Cadre</a></li>
                         <li role="menuitem"><a href="settings-facility.html">Facility</a></li>
                    </ul>
                </li>
                <li class="dropdown">
                    <a href="#" id="reportsDropdown" class="dropdown-toggle " data-toggle="dropdown">Reports <b><span class="caret"></span></b></a>
                    <ul class="dropdown-menu  nomargin" role="menu" aria-labelledby="reportsDropdown">
                         <li role="menuitem"><a href="reports-health-care-workers.html">Health Care Workers</a></li>
                         <li role="menuitem"> <a href="reports-training-metrics.html" >Usage Metrics</a></li>
                         <li role="menuitem"><a href="reports-assessment-metrics.html">Assessment Metrics</a></li>
                         <li role="menuitem"><a href="job-aids-and-standing-orders-view.html">Job Aids & Standing Orders View</a></li>
                    </ul>
                </li>
                <li ><a href="index.php" class="smallerfont mini-signout">Sign Out</a></li>
            </ul>
        </div>
    </div>
    </div>
      
      <div class="container-fluid">
 
<div class="row margintop20 marginbottom15">
    <div class="col-md-3 col-md-offset-1">
        <h3 class="arialtitlebold">Users</h3>
    </div>
    
</div><!-- .row -->
<div class="row marginbottom20">
  <div class="col-md-10 col-md-offset-1">
      <header class="containerheader"><h6>Administrators Information</h6></header>
      <section class="container">
          <article>
                      <div class="row whiteframe">
                            <div id="AdminTableContainer" class="col-md-9 margintop10 margintop10"></div>
                      </div>
          </article>
      </section>
  </div>
    
</div>

    <div class="row footer-bg noborder">
         <div class="col-md-7 col-md-offset-5 top15">
             <strong>Copyright mTrain &COPY; 2014</strong>
         </div>
    </div>
 </div><!-- .container -->


<script type="text/javascript">

function myFunction() {

      $.ajax({
      url:"php/validate.php?username="+document.getElementById("username").value,
    //  type: "POST",
      success:function(data) {
          //alert(data);
        if(data)
         {
             $("#username").validationEngine('showPrompt', 'This username is taken', 'error', true);
         }
         else
         {
             $("#username").validationEngine('showPrompt', 'Username is available', 'pass', true);
         }
      }
   });

      
      //$("#username").validationEngine({autoHideDelay: 100000});
      
      //alert("This is still your old username..."+document.getElementById("username").value);
      //$('#username').validationEngine('attach', {autoHidePrompt : false});
      //x.value = x.value.toUpperCase();
      //$("#username").validationEngine('hideAll'); 
    //}
    
}

$(document).ready(function () {

		    //Prepare jTable
			$('#AdminTableContainer').jtable({
				title: ' ',
				paging: true,
				pageSize: 4,
				sorting: true,
                                columnSelectable:false,
				defaultSorting: 'username ASC',
				actions: {
					listAction: 'jTable/AdminActionsPagedSorted.php?action=list',
					createAction: 'jTable/AdminActionsPagedSorted.php?action=create',
					updateAction: 'jTable/AdminActionsPagedSorted.php?action=update',
					deleteAction: 'jTable/AdminActionsPagedSorted.php?action=delete'
				},
				fields: {
					admin_id: {
						key: true,
						create: false,
						edit: false,
						list: false
					},
                                         username: {
						title: 'Username',
                                                input: function (data) {
                                                    if (data.record) {
                                                        //alert("Shit");
                                                        
                                                        return '<input type="text" name="username" id= "username" style="width:200px" value="' + data.record.username + '" onkeyup="myFunction()" autocomplete="off" />';
                                                        
                                                        
                                                } else {
                                                        return '<input type="text" name="username" id= "username" style="width:200px" value="" onkeyup="myFunction()" autocomplete="off" />';
                                                    }
                                        }
                                        //,
                                                //inputClass: 'validate[ajax[ajaxUserCallPhp]]'
						//type: 'hidden'
					},
                                        password: {
						title: 'Password',
						type: 'password',
                                                inputClass: 'validate[required]',
                                                edit: false,
                                                list: false
					},
                                        cpassword: {
						title: 'Confirm Password',
						type: 'password',
                                                inputClass: 'validate[required]',
                                                edit: false,
                                                list: false
					},
					role: {
						title: 'Role',
						//width: '25%',
                                                options: ['-- Select Role --','LG Officer', 'State Officer', 'FMOH Officer']
					}
                                        
				}
                                ,


////Initialize validation logic when a form is created
formCreated: function (event, data) {
data.form.find('input[name="username"]').addClass('validate[required]');
//data.form.find('textarea[name="FacilityAddress"]').addClass('validate[required]');
data.form.validationEngine();
},
//Validate form when it is being submitted
formSubmitting: function (event, data) {
return data.form.validationEngine('validate');
},
//Dispose validation logic when form is closed
formClosed: function (event, data) {
data.form.validationEngine('hide');
data.form.validationEngine('detach');
}

			});

			//Load person list from server
			$('#AdminTableContainer').jtable('load');
		
});

	</script>   

<!--<form id="myform">
<label for="field">Required: </label>
<input type="text" class="left" id="field" name="field">
<br/>
<input type="submit" value="Validate!">
</form>-->
         
  <!--       <script src="http://jqueryvalidation.org/files/dist/jquery.validate.min.js"></script>
<script src="http://jqueryvalidation.org/files/dist/additional-methods.min.js"></script>
<script>
$( "#myform" ).validate({rules: {field: "required"} });
</script>-->
   
  </body>
</html>